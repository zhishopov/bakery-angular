<h2>My Bookings</h2>

@if (error()) {
<p class="error">{{ error() }}</p>
} @if (loading()) {
<p>Loading…</p>
} @else if (bookings().length === 0) {
<p>You have no bookings yet.</p>
} @else {
<ul>
  @for (booking of bookings(); track booking._id) {
  <li>
    @if (editingId() === booking._id) {
    <form [formGroup]="editForm!" (ngSubmit)="saveEdit()">
      <input type="text" formControlName="name" placeholder="Name" />
      <input type="email" formControlName="email" placeholder="Email" />
      <input type="date" formControlName="date" />
      <input type="time" formControlName="time" />
      <input type="number" formControlName="guests" min="1" />
      <button type="submit" [disabled]="editForm!.invalid">Save</button>
      <button type="button" (click)="cancelEdit()">Cancel</button>
    </form>
    } @else {
    <div>
      <strong>{{ booking.name }}</strong> • {{ booking.email }} •
      {{ booking.date }} {{ booking.time }} • Guests: {{ booking.guests }}
      <button type="button" (click)="startEdit(booking)">Edit</button>
      <button type="button" (click)="deleteBooking(booking._id!)">
        Delete
      </button>
    </div>
    }
  </li>
  }
</ul>
}
