<h2>Admin Dashboard</h2>

@if (error()) {
<p class="error">{{ error() }}</p>
}

<section>
  <h3>All Bookings</h3>

  @if (loading()) {
  <p>Loading…</p>
  } @else if (bookings().length === 0) {
  <p>No bookings yet.</p>
  } @else {
  <ul>
    @for (b of bookings(); track b._id) {
    <li>
      @if (editingId() === b._id) {
      <form [formGroup]="editForm!" (ngSubmit)="saveEdit()">
        <input formControlName="name" placeholder="Name" />
        <input formControlName="email" placeholder="Email" type="email" />
        <input formControlName="date" type="date" />
        <input formControlName="time" type="time" />
        <input formControlName="guests" type="number" min="1" />
        <button type="submit" [disabled]="editForm!.invalid">Save</button>
        <button type="button" (click)="cancelEdit()">Cancel</button>
      </form>
      } @else {
      <div>
        <strong>{{ b.name }}</strong> • {{ b.email }} • {{ b.date }}
        {{ b.time }} • Guests: {{ b.guests }}
        <button type="button" (click)="startEdit(b)">Edit</button>
        <button type="button" (click)="deleteBooking(b._id!)">Delete</button>
      </div>
      }
    </li>
    }
  </ul>
  }
</section>

<hr />

<section>
  <h3>Add Menu Product</h3>
  <form [formGroup]="productForm" (ngSubmit)="addProduct()">
    <div>
      <label>Name</label>
      <input formControlName="name" />
    </div>
    <div>
      <label>Price</label>
      <input type="number" formControlName="price" min="0" step="0.01" />
    </div>
    <div>
      <label>Description</label>
      <textarea formControlName="description"></textarea>
    </div>
    <div>
      <label>Image filename</label>
      <input formControlName="image" placeholder="e.g. latte.webp" />
    </div>
    <div>
      <label
        ><input type="checkbox" formControlName="bestSeller" /> Best
        seller</label
      >
    </div>
    <div>
      <label>Likes</label>
      <input type="number" formControlName="likes" min="0" />
    </div>
    <button type="submit" [disabled]="productForm.invalid">
      Create Product
    </button>
  </form>
</section>
