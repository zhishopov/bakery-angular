<h2>Admin Dashboard</h2>

@if (error()) {
<p class="error">{{ error() }}</p>
}

<section>
  <h3>All Bookings</h3>

  @if (loading()) {
  <p>Loading…</p>
  } @else if (bookings().length === 0) {
  <p>No bookings yet.</p>
  } @else {
  <ul>
    @for (booking of bookings(); track booking._id) {
    <li>
      @if (editingId() === booking._id) {
      <form [formGroup]="editForm!" (ngSubmit)="saveEdit()">
        <input formControlName="name" placeholder="Name" />
        <input formControlName="email" placeholder="Email" type="email" />
        <input formControlName="date" type="date" />
        <input formControlName="time" type="time" />
        <input formControlName="guests" type="number" min="1" />
        <button type="submit" [disabled]="editForm!.invalid">Save</button>
        <button type="button" (click)="cancelEdit()">Cancel</button>
      </form>
      } @else {
      <div>
        <strong>{{ booking.name }}</strong> • {{ booking.email }} •
        {{ booking.date }} {{ booking.time }} • Guests: {{ booking.guests }}
        <button type="button" (click)="startEdit(booking)">Edit</button>
        <button type="button" (click)="deleteBooking(booking._id!)">
          Delete
        </button>
      </div>
      }
    </li>
    }
  </ul>
  }
</section>

<hr />

<section>
  <h3>Products</h3>
  <button type="button" [routerLink]="['/admin/products']">
    Create New Product
  </button>
</section>
