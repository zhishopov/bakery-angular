<h2>Create Product</h2>

@if (serverError()) {
<p class="server-error">{{ serverError() }}</p>
}

<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div>
    <label>Name</label>
    <input type="text" formControlName="name" />
    @if (f['name'].invalid && (f['name'].dirty || f['name'].touched)) {
    <p class="error">Name is required (min 2 characters).</p>
    }
  </div>

  <div>
    <label>Price (Â£)</label>
    <input type="number" step="0.01" formControlName="price" />
    @if (f['price'].invalid && (f['price'].dirty || f['price'].touched)) {
    <p class="error">Price is required and must be 0 or greater.</p>
    }
  </div>

  <div>
    <label>Description</label>
    <textarea rows="4" formControlName="description"></textarea>
    @if (f['description'].invalid && (f['description'].dirty ||
    f['description'].touched)) {
    <p class="error">Description is required (min 5 characters).</p>
    }
  </div>

  <div>
    <label>Image file name</label>
    <input
      type="text"
      formControlName="image"
      placeholder="e.g. cappuccino.jpg"
    />
    @if (f['image'].invalid && (f['image'].dirty || f['image'].touched)) {
    <p class="error">Image file name is required.</p>
    }
  </div>

  <div>
    <label>
      <input type="checkbox" formControlName="bestSeller" />
      Mark as Best Seller
    </label>
  </div>

  <button type="submit" [disabled]="form.invalid">Create</button>
  <a routerLink="/admin/dashboard">Cancel</a>
</form>
